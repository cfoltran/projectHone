var Twit = require('twit')

//var config = require('./config')

var T = new Twit({
	consumer_key:         'sIklgXwMbZZK5cL6hSRs6Vm4O',
	consumer_secret:      'xci297OYqxyjCR0hu2jiTJoel5AxUM2ktkYdO4e6sZHamr6JCM',
	access_token:         '959135997836644352-ZZNQJRW3HY6iWfJ7XWyYneOHS8cOuTg',
	access_token_secret:  'Bi7DBcOLWDYJS6E0OoVVygtDREcaRcj68i0bzvED1lMAT',
	//timeout_ms:          60*1000,  // optional HTTP request timeout to apply to all requests. 

})

function tweetIT(tweet_contents){
	
	var params2 ={
		status: tweet_contents
	}

	T.post('statuses/update', params2, post);

	function post(err, data, response) {
 		
		if(err){
 		 console.log('We have a problem')
		}
		else{
			console.log('It\'s working boooooooooooooy')
		}
	}

}


//set up a user stream
var stream = T.stream('user');
//anytime someone follows me
stream.on('follow', followed);


//fonction d'envoie de message lors d'un nouveau follower
function followed(eventMsg){
	console.log("Followed event !")
	var name = eventMsg.source.name; //on extrait le nom du nouveau follower
	var screenName = eventMsg.source.screen_name;
	tweetIT("@" + screenName + " thanks for the follow ;)") //et on lui dit coucou
}

